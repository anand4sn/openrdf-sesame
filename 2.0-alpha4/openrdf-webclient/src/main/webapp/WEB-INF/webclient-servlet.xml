<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="serverSelectionController" class="org.openrdf.sesame.webclient.ServerSelectionController">
        <property name="sessionForm" value="false" />
    	<property name="commandName" value="server" />
		<property name="commandClass" value="org.openrdf.sesame.webclient.ServerSelection" />
        <property name="formView" value="overview" />
		<property name="successView" value="redirect:server.view" />
		<property name="bindOnNewForm" value="true" />
    </bean>

    <bean id="serverController" class="org.openrdf.sesame.webclient.server.ServerController" />
    
    <bean id="repositoryController" class="org.openrdf.sesame.webclient.repository.RepositoryController" />
    
    <bean id="selectQueryFormController" class="org.openrdf.sesame.webclient.query.SelectQueryFormController">
        <property name="sessionForm" value="false" />
        <property name="commandName" value="query" />
        <property name="commandClass" value="org.openrdf.sesame.webclient.query.QueryInfo" />
        <property name="formView" value="select" />
    	<property name="successView" value="tableresult" />
    </bean>

    <bean id="constructQueryFormController" class="org.openrdf.sesame.webclient.query.ConstructQueryFormController">
        <property name="sessionForm" value="false" />
        <property name="commandName" value="query" />
        <property name="commandClass" value="org.openrdf.sesame.webclient.query.QueryInfo" />
        <property name="formView" value="construct" />
    	<property name="successView" value="graphresult" />
    </bean>

    <bean id="filenameViewController" class="org.springframework.web.servlet.mvc.UrlFilenameViewController"/>    

    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="messages" />
    </bean>
    
    <bean id="serverSelectionMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    	<property name="order" value="1" />
         <property name="interceptors">
            <list>
                <bean class="org.openrdf.sesame.webclient.ServerSelectionInterceptor"/>
            </list>
        </property>
        <property name="mappings">
            <props>
                <prop key="/overview.view">serverSelectionController</prop>
             </props>
        </property>
    </bean>
    
    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    	<property name="order" value="2" />
        <property name="mappings">
            <props>
                <prop key="/server.view">serverController</prop>
                <prop key="/repository/overview.view">repositoryController</prop>
				<prop key="/query/select.view">selectQueryFormController</prop>
                <prop key="/query/construct.view">constructQueryFormController</prop>
                <prop key="*.view">filenameViewController</prop>
                <prop key="*.form">filenameViewController</prop>
            </props>
        </property>
    </bean>
    
    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean>
    
</beans>
